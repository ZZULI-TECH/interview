# top 命令

top命令是Linux下常用的性能分析工具，能够实时显示系统中各个进程的资源占用状况，类似于Windows的任务管理器。下面是top命令的部分截图：

![image](https://github.com/ZZULI-TECH/interview/blob/master/images/linux-top.png?raw=true)

**分析：** 

1. 第1行分别显示：系统当前时间、系统运行时间、当前用户登录数和系统负载。 
系统负载有3个数值，分别是系统最近1min、5min、15min的平均负载。一般对于单个处理器来说，负载在0~1.00是正常的，超过1.00就要引起注意了。在多核处理器中，系统均值不应该高于处理器核心的总数。 
2. 第2行分别显示：total（进程总数）、running（正在运行的进程数）、sleeping（睡眠的进程数）、stopped（停止的进程数）和zombie（僵尸进程数） 
3. 第3行分别显示：%us（用户空间占用CPU百分比）、%sy（内核空间占用CPU百分比）、%ni（用户进程空间内改变过优先级的进程占用CPU百分比）、%id（空闲CPU百分比）、%wa（等待输入输出（I/O）的CPU时间百分比）、%hi（CPU处理硬件中断的时间）、%si（CPU处理软中断的时间）、%st（用于有虚拟CPU的情况）。通常id%值可以反映一个系统CPU的闲忙程度。 
4. 第4行显示内存MEM的数据：total（物理内存总量）、used（使用的物理内存总量）、free（空闲内存总量）、buffers（用作内核缓存的内存量）。 
5. 第5行则显示交换器SWAP的数据：total（交换区总量）、used（使用的交换区总量）、free（空闲交换区总量）、cached（缓冲的交换区总量）。 
5. 第6行则显示PID（进程号）、USER（运行用户）、PR（优先级）、NI（任务nice值）、VIRT（虚拟内存用量）VITR=SWAP+RES、RES（物理内存用量）、SHR（共享内存用量）、S（进程状态）、%CPU（CPU占用比）、%MEM（物理内存占用比）、TIME+（累计CPU占用时间）、COMMAND命令名/命令行

**buffers和cached的区别：**

buffers指的是块设备的读写缓冲区，cached指的是文件系统本身的页面缓存。它们都是Linux操作系统底层的机制，目的就是为了加速对磁盘的访问。

**总结：** 

top命令显示系统当前的进程和其他状况，top是一个动态显示过程，即可以通过用户按键来不断刷新当前状态。如果在前台执行该命令，它将独占前台，直到用户终止该程序为止。 
top命令提供了实时地对系统处理器的状态监视。它将显示系统中CPU最“敏感”的任务列表。该命令可以按CPU使用、内存使用和执行时间对任务进行排序。输入“q”，则退出top命令。